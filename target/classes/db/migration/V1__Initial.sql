CREATE TABLE role(id IDENTITY PRIMARY KEY, name VARCHAR(32) UNIQUE NOT NULL);
INSERT INTO role(name) VALUES ('ADMIN'), ('CASHIER');
CREATE TABLE "user"(id IDENTITY PRIMARY KEY, username VARCHAR(64) UNIQUE NOT NULL, password_hash VARCHAR(255) NOT NULL, full_name VARCHAR(120), role_id INT, active BOOLEAN DEFAULT TRUE);
CREATE TABLE category(id IDENTITY PRIMARY KEY, name VARCHAR(100) UNIQUE NOT NULL, description VARCHAR(255));
CREATE TABLE item(id IDENTITY PRIMARY KEY, name VARCHAR(140) UNIQUE NOT NULL, description VARCHAR(1024), price DECIMAL(18,2) NOT NULL, category_id INT, image_path VARCHAR(255));
CREATE TABLE shift(id IDENTITY PRIMARY KEY, user_id INT, start_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP, end_time TIMESTAMP, starting_float DECIMAL(18,2) DEFAULT 0, actual_cash DECIMAL(18,2));
CREATE TABLE "order"(id IDENTITY PRIMARY KEY, user_id INT, shift_id INT, total_amount DECIMAL(18,2), discount_amount DECIMAL(18,2), status VARCHAR(32), payment_method VARCHAR(32), payment_confirmed BOOLEAN DEFAULT FALSE, created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP);
CREATE TABLE order_item(id IDENTITY PRIMARY KEY, order_id INT, item_id INT, quantity INT, price_at_purchase DECIMAL(18,2), line_total DECIMAL(18,2));
CREATE TABLE expense(id IDENTITY PRIMARY KEY, amount DECIMAL(18,2), description VARCHAR(512), category VARCHAR(100), user_id INT, recorded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP, shift_id INT);
CREATE TABLE settings("key" VARCHAR(128) PRIMARY KEY, "value" VARCHAR(1024));
