package com.yourcompany.cafeteria.ui; import javafx.fxml.FXML; import javafx.scene.control.*; import javafx.fxml.FXMLLoader; import javafx.scene.Scene; import javafx.stage.Stage; import com.yourcompany.cafeteria.util.DataSourceProvider; import com.yourcompany.cafeteria.service.UsersService; public class LoginController { @FXML private TextField usernameField; @FXML private PasswordField passwordField; @FXML private Label status; @FXML public void handleLogin(){ try (var c = DataSourceProvider.getConnection()){ var svc = new UsersService(c); var u = svc.findByUsername(usernameField.getText()); if(u!=null){ Stage s = (Stage) usernameField.getScene().getWindow(); s.setScene(new Scene(FXMLLoader.load(getClass().getResource("/fxml/SalesView.fxml")), 1024, 768)); } else status.setText("User not found"); } catch(Exception e){ e.printStackTrace(); status.setText(e.getMessage()); } } }
