package com.yourcompany.cafeteria.ui; import javafx.fxml.FXML; import javafx.scene.control.*; import com.yourcompany.cafeteria.util.DataSourceProvider; import com.yourcompany.cafeteria.service.OrdersService; import com.yourcompany.cafeteria.model.Order; import com.yourcompany.cafeteria.model.OrderItem; import java.util.ArrayList; public class SalesController { @FXML private TextArea cartArea; @FXML private TextField discountField; private java.util.List<OrderItem> cart = new ArrayList<>(); @FXML public void handleAddSample(){ cartArea.appendText("1x Cheese Sandwich - 50.00\n"); } @FXML public void handleFinalize(){ try (var c = DataSourceProvider.getConnection()){ Order o = new Order(); o.cashierId = 1; o.status="FINALIZED"; o.paymentMethod="CASH"; o.paymentConfirmed=true; o.items = cart; o.totalAmount = cart.stream().map(i->i.getLineTotal()).reduce(java.math.BigDecimal.ZERO, java.math.BigDecimal::add); int id = new OrdersService(c).create(o); cartArea.appendText("Order saved id="+id+"\n"); cart.clear(); } catch(Exception e){ e.printStackTrace(); } } }
