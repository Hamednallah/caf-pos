package com.yourcompany.cafeteria.util; import org.flywaydb.core.Flyway; import javax.sql.DataSource; import java.sql.Connection; public class TestDatabase { public static Connection open() throws Exception { DataSource ds = com.yourcompany.cafeteria.util.DataSourceProvider.getDataSource(); Flyway flyway = Flyway.configure().dataSource(ds).locations("classpath:db/migration").load(); flyway.clean(); flyway.migrate(); return ds.getConnection(); } }
